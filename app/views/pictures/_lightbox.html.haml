.modal{id: lightbox_picture_id(picture), tabindex: -1, role: 'dialog', aria: {labelledby: lightbox_picture_id(picture, label: true)}.merge(picture_aria_hidden(picture))}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{data: {dismiss: 'modal'}}
          %span{aria: {hidden: true}}
            &times;
          %span.sr-only Close
        %h4.modal-title{id: lightbox_picture_id(picture, label: true)}
          .btn-group
            %button.btn.btn-default.dropdown-toggle{data: {toggle: 'dropdown'}}
              %span.caret
            %ul.dropdown-menu{role: 'menu'}
              %li
                = link_to gallery_picture_download_path(picture.gallery, picture) do
                  = icon :download
                  Download
              %li
                = link_to gallery_picture_path(picture.gallery, picture), data: {no_turbolink: true} do
                  = icon :share
                  Share
              %li
                %a{data: {toggle: 'collapse'}, href: lightbox_picture_id(picture, info: true, hash: true), aria: {expanded: 'false', controls: lightbox_picture_id(picture, info: true)}}
                  = icon :info_sign
                  Metadata
              - if @boss_token
                %li
                  = link_to gallery_picture_delete_path(@boss_token, picture), method: :delete, data: {confirm: 'Really delete?'} do
                    = icon :trash
                    Delete
          - if writable?
            = best_in_place picture, :title, path: [picture.gallery, picture], nil: "<small>Set a title by clicking here!</small>"
          - else
            = picture
      .modal-body
        .text-center
          = link_to picture.image.url do
            = image_tag nil, data: {src: picture.image.url(:medium)}, title: picture
            %noscript
              = image_tag picture.image.url(:medium), title: picture
      .modal-footer
        %a{data: {toggle: 'collapse'}, href: lightbox_picture_id(picture, info: true, hash: true), aria: {expanded: 'false', controls: lightbox_picture_id(picture, info: true)}}
          = icon :info_sign
        .collapse{id: lightbox_picture_id(picture, info: true)}
          - if picture.photographed_at
            Photographed
            = succeed ',' do
              = timestamp_ago picture.photographed_at
            uploaded
          - else
            Uploaded
          = succeed '.' do
            = timestamp_ago picture.created_at
          - if picture.camera
            %br
            Camera model is
            = succeed '.' do
              %em= picture.camera
