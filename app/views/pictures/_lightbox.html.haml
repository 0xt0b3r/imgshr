.modal{id: lightbox_picture_id(picture), tabindex: -1, role: 'dialog', aria: {labelledby: lightbox_picture_id(picture, label: true)}.merge(picture_aria_hidden(picture))}
  .modal-dialog
    .modal-content
      .modal-header
        %button.close{data: {dismiss: 'modal'}}
          %span{aria: {hidden: true}}
            &times;
          %span.sr-only Close
        %h4.modal-title{id: lightbox_picture_id(picture, label: true)}
          .btn-group
            %button.btn.btn-default.dropdown-toggle{data: {toggle: 'dropdown'}}
              %span.caret
            %ul.dropdown-menu{role: 'menu'}
              %li
                = link_to gallery_picture_download_path(picture.gallery, picture) do
                  = icon :download
                  Download
              %li
                = link_to gallery_picture_path(picture.gallery, picture), data: {no_turbolink: true} do
                  = icon :share
                  Share
              %li
                %a{data: {toggle: 'collapse'}, href: lightbox_picture_id(picture, info: true, hash: true), aria: {expanded: 'false', controls: lightbox_picture_id(picture, info: true)}}
                  = icon :info_sign
                  Metadata
              - if @boss_token
                %li
                  = link_to gallery_picture_delete_path(@boss_token, picture), method: :delete, data: {confirm: 'Really delete?'} do
                    = icon :trash
                    Delete
          - if writable?
            = best_in_place picture, :title, path: [picture.gallery, picture], nil: "<small>Set a title by clicking here!</small>"
          - else
            = picture
      .modal-body
        .text-center
          = link_to picture.image.url do
            = image_tag nil, data: {src: picture.image.url(:medium)}, title: picture
            %noscript
              = image_tag picture.image.url(:medium), title: picture
      .modal-footer
        - unless picture.photographed_at.nil?
          Photographed
          = succeed ',' do
            = timestamp_ago picture.photographed_at
          uploaded
        - else
          Uploaded
        = succeed '.' do
          = timestamp_ago picture.created_at
        %a{data: {toggle: 'collapse'}, href: lightbox_picture_id(picture, info: true, hash: true), aria: {expanded: 'false', controls: lightbox_picture_id(picture, info: true)}}
          = icon :info_sign
        .collapse{id: lightbox_picture_id(picture, info: true)}
          %br
          .table-responsive
            %table.table.table-condensed.table-hover.table-bordered
              - unless picture.camera.nil?
                %tr
                  %td  Camera
                  %td= picture.camera
              - unless picture.focal_length.nil?
                %tr
                  %td  Focal length
                  %td= picture.focal_length
              - unless picture.aperture.nil?
                %tr
                  %td  Aperture
                  %td= picture.aperture
              - unless picture.shutter_speed.nil?
                %tr
                  %td  Shutter speed
                  %td= picture.shutter_speed
              - unless picture.iso_speed.nil?
                %tr
                  %td  ISO speed
                  %td= picture.iso_speed
              - unless picture.flash.nil?
                %tr
                  %td  Flash
                  %td
                    - if picture.flash
                      = icon :ok
                    - else
                      = icon :remove
