-# This is currently also used on galleries#show

- if picture.image_file.video?
  - if defined? size
    = image_tag picture.image_file.preview(Settings.sizes.send(size)),
      class: 'video'
    = icon :play
  - else
    = video_tag rails_blob_path(picture.image_file),
      controls: true

- elsif picture.plain?
  - size ||= :medium
  - image = picture.image_file.variant(Settings.sizes.send(size))
  - mediumBadImage = picture.image_file.variant(Settings.sizes.mediumBad)

  = react_component :LazyPicture,
    { src: url_for(image),
      srcMobile: size == :small ? url_for(mediumBadImage) : nil,
      title: picture.to_s,
      height: picture.height,
      width: picture.width }

  %noscript
    = image_tag image, title: picture, alt: picture

- else
  = react_component 'crypto/LazyEncryptedImage',
    { src: url_for(picture.image_file),
      title: picture.to_s }
